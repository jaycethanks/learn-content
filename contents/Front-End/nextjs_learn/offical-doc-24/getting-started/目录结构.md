---
order: 2
---

## 目录结构

App Router

```bash
$ tree -L 2 --dirsfirst -I 'node_modules'
.
├── app
│   ├── favicon.ico
│   ├── globals.css
│   ├── layout.tsx
│   └── page.tsx
├── public
│   ├── next.svg
│   └── vercel.svg
├── README.md
├── next-env.d.ts
├── next.config.mjs
├── package-lock.json
├── package.json
├── postcss.config.mjs
├── tailwind.config.ts
└── tsconfig.json

2 directories, 14 files
```

No App Router

```bash
$ tree -L 2 --dirsfirst -I 'node_modules'
.
├── public
│   ├── favicon.ico
│   ├── next.svg
│   └── vercel.svg
├── src
│   ├── pages
│   └── styles
├── README.md
├── next-env.d.ts
├── next.config.mjs
├── package-lock.json
├── package.json
├── postcss.config.mjs
├── tailwind.config.ts
└── tsconfig.json

4 directories, 11 files
```

官方文档上的目录结构描述，和目前使用自动创建的目录结构不太一样，下面将按照官网介绍说明。

### 顶层目录

官网介绍目录结构根据创建时 Router 的不同选择，可能结构如下：

```bash
.
├── public
├── src
│   ├── app
│   └── pages

# 或者
.
├── public
├── app
├── pages
```

其中

-   app: App Router
-   pages: Pages Router
-   public: 静态资源文件
-   src: 可选的应用源码文件

### 顶层文件

| 文件名                                                       | 释意                       |
| ------------------------------------------------------------ | -------------------------- |
| [`next.config.js`](https://nextjs.org/docs/app/api-reference/next-config-js) | Next.js 应用级别的配置文件 |
| `package.json`                                               | 略                         |
| [`instrumentation.ts`](https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation) | 分析和监控工具的集成文件   |
| [`middleware.ts`](https://nextjs.org/docs/app/building-your-application/routing/middleware) | Next.js 的请求中间件       |
| [`.env`](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables) | 环境变量                   |
| [`.env.local`](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables) | 本地环境变量               |
| [`env.production`](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables) | 生产环境变量               |
| [`.env.development`](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables) | 开发环境变量               |
| [`.eslintrc.json`](https://nextjs.org/docs/app/building-your-application/configuring/eslint) | 略                         |
| .gitignore                                                   | 略                         |
| next-env.d.ts                                                | Next.js Ts 声明文件        |
| tsconfig.json                                                | 略                         |
| jsconfig.json                                                | 略                         |





## App 路由约定 Conventions

以下文件约定用于定义路由和处理  App Router 中的元数据。

### 路由文件

| 文件名                                                       | 扩展名              | 释义             |
| ------------------------------------------------------------ | ------------------- | ---------------- |
| [`layout`](https://nextjs.org/docs/app/api-reference/file-conventions/layout) | `.js` `.jsx` `.tsx` | 布局             |
| [`page`](https://nextjs.org/docs/app/api-reference/file-conventions/page) | `.js` `.jsx` `.tsx` | 页面             |
| [`loading`](https://nextjs.org/docs/app/api-reference/file-conventions/loading) | `.js` `.jsx` `.tsx` | 加载中UI         |
| [`not-found`](https://nextjs.org/docs/app/api-reference/file-conventions/not-found) | `.js` `.jsx` `.tsx` | Not Found UI     |
| [`error`](https://nextjs.org/docs/app/api-reference/file-conventions/error) | `.js` `.jsx` `.tsx` | Error UI         |
| [`global-error`](https://nextjs.org/docs/app/api-reference/file-conventions/error#global-errorjs) | `.js` `.jsx` `.tsx` | Global Error UI  |
| [`route`](https://nextjs.org/docs/app/api-reference/file-conventions/route) | `.js` `.ts`         | API endpoint     |
| [`template`](https://nextjs.org/docs/app/api-reference/file-conventions/template) | `.js` `.jsx` `.tsx` | Re-rendered 布局 |
| [`default`](https://nextjs.org/docs/app/api-reference/file-conventions/default) | `.js` `.jsx` `.tsx` | 平行路线后备页面 |

### 嵌套路由

| [`folder`](https://nextjs.org/docs/app/building-your-application/routing#route-segments) | Route segment        |
| ------------------------------------------------------------ | -------------------- |
| [`folder/folder`](https://nextjs.org/docs/app/building-your-application/routing#nested-routes) | Nested route segment |

### 动态路由

|                                                              |                      |
| ------------------------------------------------------------ | -------------------- |
| [`[folder]`](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#convention) | 动态路由 segment     |
| [`[...folder]`](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#catch-all-segments) | 捕获所有路由 segment |
| [`[[...folder ]]`](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#optional-catch-all-segments) | 可选捕获路由 segment |

### 路由组 和 私有目录

|                                                              |                          |
| ------------------------------------------------------------ | ------------------------ |
| [`(folder)`](https://nextjs.org/docs/app/building-your-application/routing/route-groups#convention) | 不影响 Routing 的路由组  |
| [`_folder`](https://nextjs.org/docs/app/building-your-application/routing/colocation#private-folders) | 排除在路由系统之外的目录 |



### 平行和拦截路由

| [`@folder`](https://nextjs.org/docs/app/building-your-application/routing/parallel-routes#slots) | Named slot                            |
| ------------------------------------------------------------ | ------------------------------------- |
| [`(.)folder`](https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes#convention) | Intercept same level 同级拦截         |
| [`(..)folder`](https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes#convention) | Intercept one level above 上级拦截    |
| [`(..)(..)folder`](https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes#convention) | Intercept two levels above 上上级拦截 |
| [`(...)folder`](https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes#convention) | Intercept from root 从root 开始拦截？ |



### 元数据文件约定 Metadata File Conventions

#### App Icons

|                                                              |                                     |                          |
| ------------------------------------------------------------ | ----------------------------------- | ------------------------ |
| [`favicon`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#favicon) | `.ico`                              | Favicon file             |
| [`icon`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#icon) | `.ico` `.jpg` `.jpeg` `.png` `.svg` | App Icon file            |
| [`icon`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#generate-icons-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`                  | Generated App Icon       |
| [`apple-icon`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#apple-icon) | `.jpg` `.jpeg`, `.png`              | Apple App Icon file      |
| [`apple-icon`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#generate-icons-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`                  | Generated Apple App Icon |

#### Open Graph and Twitter Images

|                                                              |                              |                            |
| ------------------------------------------------------------ | ---------------------------- | -------------------------- |
| [`opengraph-image`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#opengraph-image) | `.jpg` `.jpeg` `.png` `.gif` | Open Graph image file      |
| [`opengraph-image`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#generate-images-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`           | Generated Open Graph image |
| [`twitter-image`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#twitter-image) | `.jpg` `.jpeg` `.png` `.gif` | Twitter image file         |
| [`twitter-image`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#generate-images-using-code-js-ts-tsx) | `.js` `.ts` `.tsx`           | Generated Twitter image    |

#### SEO

|                                                              |             |                       |
| ------------------------------------------------------------ | ----------- | --------------------- |
| [`sitemap`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/sitemap#sitemap-files-xml) | `.xml`      | Sitemap file          |
| [`sitemap`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/sitemap#generating-a-sitemap-using-code-js-ts) | `.js` `.ts` | Generated Sitemap     |
| [`robots`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/robots#static-robotstxt) | `.txt`      | Robots file           |
| [`robots`](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/robots#generate-a-robots-file) | `.js` `.ts` | Generated Robots file |





## Pages 路由约定 Routing Conventions

下列文件约定用于在 Pages Router 中定义路由

### 特殊文件 Special Files

|                                                              |                     |                   |
| ------------------------------------------------------------ | ------------------- | ----------------- |
| [`_app`](https://nextjs.org/docs/pages/building-your-application/routing/custom-app) | `.js` `.jsx` `.tsx` | Custom App        |
| [`_document`](https://nextjs.org/docs/pages/building-your-application/routing/custom-document) | `.js` `.jsx` `.tsx` | Custom Document   |
| [`_error`](https://nextjs.org/docs/pages/building-your-application/routing/custom-error#more-advanced-error-page-customizing) | `.js` `.jsx` `.tsx` | Custom Error Page |
| [`404`](https://nextjs.org/docs/pages/building-your-application/routing/custom-error#404-page) | `.js` `.jsx` `.tsx` | 404 Error Page    |
| [`500`](https://nextjs.org/docs/pages/building-your-application/routing/custom-error#500-page) | `.js` `.jsx` `.tsx` | 500 Error Page    |

### Routes

|                                                              |                     |             |
| ------------------------------------------------------------ | ------------------- | ----------- |
| **Folder convention**                                        |                     |             |
| [`index`](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#index-routes) | `.js` `.jsx` `.tsx` | Home page   |
| [`folder/index`](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#index-routes) | `.js` `.jsx` `.tsx` | Nested page |
| **File convention**                                          |                     |             |
| [`index`](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#index-routes) | `.js` `.jsx` `.tsx` | Home page   |
| [`file`](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts) | `.js` `.jsx` `.tsx` | Nested page |

### Dynamic Routes

|                                                              |                     |                                  |
| ------------------------------------------------------------ | ------------------- | -------------------------------- |
| **Folder convention**                                        |                     |                                  |
| [`[folder\]/index`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes) | `.js` `.jsx` `.tsx` | Dynamic route segment            |
| [`[...folder\]/index`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#catch-all-segments) | `.js` `.jsx` `.tsx` | Catch-all route segment          |
| [`[[...folder\]]/index`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#optional-catch-all-segments) | `.js` `.jsx` `.tsx` | Optional catch-all route segment |
| **File convention**                                          |                     |                                  |
| [`[file\]`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes) | `.js` `.jsx` `.tsx` | Dynamic route segment            |
| [`[...file\]`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#catch-all-segments) | `.js` `.jsx` `.tsx` | Catch-all route segment          |
| [`[[...file\]]`](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#optional-catch-all-segments) | `.js` `.jsx` `.tsx` | Optional catch-all route segment |
